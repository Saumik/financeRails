%table.table.table-striped.table-bordered.report_table
  %thead
    %tr
      %th.name Budget Title
      - @presenter.months.each do |(month, year)|
        %th.date
          = "#{month_name(month)} #{year}"
      %th.total Total
      %th.actions
  %tbody
    - @presenter.budget_items.each do |budget_item|
      %tr.item-row{:data => {:id => budget_item.id}}
        %td
          = budget_item.name + ' - '
          %span.limit!= currency budget_item.limit
          %ul.categories
            - budget_item.categories.each do |category|
              %li=category
        - @presenter.months.each do |(month, year)|
          %td
            !=currency @presenter.total_expenses_for_budget_item_in_month(budget_item, month, year)
        %td
          - amount_left = @presenter.amount_left_budget_item_in_year(budget_item)
          != currency @presenter.total_expenses_for_budget_item_in_year(budget_item)
          %span{:class => 'amount-left ' + (amount_left > 0 ? 'positive' : 'negative')}
            != currency amount_left
        %td.actions
          = link_to 'Edit', '#', :class => 'btn btn-primary edit_btn'
          = link_to 'Delete', budget_path(budget_item), :remote => true, :method => :delete, :confirm => 'Are you sure delete to delete ' + budget_item.try(:name).to_s + '?', :class => 'btn btn-danger delete'
    %tr
      %td.total
        Total:
        != currency @presenter.total_limit
      - @presenter.months.each do |(month, year)|
        %td
      %td
      %td
